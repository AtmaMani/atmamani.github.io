<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>06-build-recommendation-engine-scaled | Atma's blog</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#d4567b">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../../rss.xml">
<link rel="canonical" href="https://atmamani.github.io/projects/ml/portland-house-hunting/06-build-recommendation-engine-scaled/">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-113202945-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-113202945-1');
</script><meta name="author" content="Atma Mani">
<meta property="og:site_name" content="Atma's blog">
<meta property="og:title" content="06-build-recommendation-engine-scaled">
<meta property="og:url" content="https://atmamani.github.io/projects/ml/portland-house-hunting/06-build-recommendation-engine-scaled/">
<meta property="og:description" content="**Table of Contents**
Building a housing recommendation engineRead ranked datasetGenerate preference columnDrop rank, scores_scaled columns from DataFrameOne hot encodingScale numeric columnsSplit dat">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-10-11T13:24:49-07:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://atmamani.github.io/">

                <span id="blog-title">Atma's blog</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="../../../math/">Learn math with Python</a>
                    </li>
<li>
<a href="../../../stats/">Learn stats with Python</a>
                    </li>
<li>
<a href="../../">Machine Learning projects</a>
                    </li>
<li>
<a href="../../../dl/">Deep Learning projects</a>
                    </li>
<li>
<a href="../../../spatial/">Spatial analysis</a>
                    </li>
<li>
<a href="../../../thermal/">Thermal remote sensing</a>
                    </li>
<li>
<a href="../../../mwrs/">Microwave remote sensing</a>
                    </li>
<li>
<a href="../../../fun/">Fun projects</a>
            </li>
</ul>
</li>
<li>
<a href="../../../../blog/">Blog</a>
                </li>
<li>
<a href="../../../../talks/">Talks</a>
            </li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Cheatsheets <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="../../../../cheatsheets/learning-resources/">General learning resources</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/python/python_cheat_sheet_1/">Python basics, comprehensions</a>
                    </li>
<li>
<a href="../../../../cheatsheets/python/python_cheat_sheet_2/">Python OO and exception handling</a>
                    </li>
<li>
<a href="../../../../cheatsheets/python/python_cheat_sheet_3/">Python map, reduce, lambdas</a>
                    </li>
<li>
<a href="../../../../images/regex-mindmap.jpg">Python regex</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/conda_cheat_sheet/">Conda basics</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/numpy/numpy_cheat_sheet_1/">NumPy basics</a>
                    </li>
<li>
<a href="../../../../cheatsheets/numpy/numpy_cheat_sheet_2/">NumPy array slicing, dicing, searching</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/pandas/pandas_cheat_sheet_1/">Pandas basics</a>
                    </li>
<li>
<a href="../../../../cheatsheets/pandas/pandas_cheat_sheet_2/">Pandas multilevel index, <br>    missing data, aggregation, merging</a>
                    </li>
<li>
<a href="../../../../cheatsheets/pandas/pandas_cheat_sheet_3/">Productivity with Pandas</a>
                    </li>
<li>
<a href="../../../../cheatsheets/pandas/pandas_data_viz_1/">Pandas data visualization</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/matplotlib/matplotlib_1/">Matplotlib basics</a>
                    </li>
<li>
<a href="../../../../cheatsheets/matplotlib/matplotlib_2/">Matplotlib log scales, ticks, scientific</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/seaborn/seaborn_cheat_sheet_1/">Seaborn dist, joint, pair, rug plots</a>
                    </li>
<li>
<a href="../../../../cheatsheets/seaborn/seaborn_cheat_sheet_2/">Seaborn categorical - bar, count, <br>violin, strip, swarm plots</a>
                    </li>
<li>
<a href="../../../../cheatsheets/seaborn/seaborn_cheat_sheet_3/">Seaborn matrix, regression - heatmap, <br> cluster, regression</a>
                    </li>
<li>
<a href="../../../../cheatsheets/seaborn/seaborn_cheat_sheet_4/">Seaborn grids &amp; custom - pair, facet grids <br> customization</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/plotly/plotly_cufflinks_cheat_sheet_1/">Plotly introduction</a>
                    </li>
<li>
<a href="../../../../cheatsheets/plotly/plotly_cufflinks_cheat_sheet_2/">Plotly - interactive plotting</a>
                    </li>
<li>
<a href="../../../../cheatsheets/plotly/plotly_geographical_plotting_1/">Plotly - geographic plotting</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/r_cheat_sheet_1/">R basics</a>
                    </li>
<li>
<a href="../../../../cheatsheets/js_essentials/">Javascript essentials</a>
                    </li>
<li>
<a href="../../../../cheatsheets/latex-1/">Latex introduction</a>
                    </li>
<li>
<a href="../../../../cheatsheets/docker-1/">Docker introduction</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/geopandas-1/">GeoPandas - IO, projections, plotting</a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/geopandas-2/">GeoPandas - GP, IO, interactive plotting, geocoding</a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/geopandas-3/">GeoPandas - spatial overlays, topology</a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/geopandas-4/">GeoPandas - PySal, OSM data IO</a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/open-geo-raster-1/">Rasterio - IO, plotting, histograms</a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/open-geo-raster-2/">Rasterio - hyperspectral, SAM</a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/postgis-1/">PostGIS - introduction</a>
                    </li>
<li>
<a href="../../../../cheatsheets/open-geo/postgis-2/">PostGIS - SQLAlchemy, GeoAlchemy, GeoPandas</a>
                    </li>
<li>
<a href="../../../../"><hr></a>
                    </li>
<li>
<a href="../../../../cheatsheets/web-development/">Web Development</a>
                    </li>
<li>
<a href="../../../../cheatsheets/html/">HTML basics</a>
                    </li>
<li>
<a href="../../../../cheatsheets/flask-1/">Design principles behind RESTful APIs</a>
                    </li>
<li>
<a href="../../../../cheatsheets/flask-2/">Making RESTful APIs with Flask in Python</a>
            </li>
</ul>
</li>
<li>
<a href="../../../../apps/">Apps</a>
                </li>
<li>
<a href="../../../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://atmamani.github.io/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">06-build-recommendation-engine-scaled</a></h1>

        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p></p>
<h2>**Table of Contents**<span class="tocSkip"></span>
</h2>
<div class="toc"><ul class="toc-item"><li>
<span><a href="#Building-a-housing-recommendation-engine" data-toc-modified-id="Building-a-housing-recommendation-engine-1">Building a housing recommendation engine</a></span><ul class="toc-item">
<li><ul class="toc-item">
<li><span><a href="#Read-ranked-dataset" data-toc-modified-id="Read-ranked-dataset-1.0.1">Read ranked dataset</a></span></li>
<li>
<span><a href="#Generate-preference-column" data-toc-modified-id="Generate-preference-column-1.0.2">Generate preference column</a></span><ul class="toc-item"><li><span><a href="#Drop-rank,-scores_scaled-columns-from-DataFrame" data-toc-modified-id="Drop-rank,-scores_scaled-columns-from-DataFrame-1.0.2.1">Drop <code>rank</code>, <code>scores_scaled</code> columns from DataFrame</a></span></li></ul>
</li>
</ul></li>
<li><span><a href="#One-hot-encoding" data-toc-modified-id="One-hot-encoding-1.1">One hot encoding</a></span></li>
<li><span><a href="#Scale-numeric-columns" data-toc-modified-id="Scale-numeric-columns-1.2">Scale numeric columns</a></span></li>
<li><span><a href="#Split-dataset-into-training-and-test" data-toc-modified-id="Split-dataset-into-training-and-test-1.3">Split dataset into training and test</a></span></li>
<li>
<span><a href="#Logistic-Regression" data-toc-modified-id="Logistic-Regression-1.4">Logistic Regression</a></span><ul class="toc-item">
<li><span><a href="#Model-evaluation" data-toc-modified-id="Model-evaluation-1.4.1">Model evaluation</a></span></li>
<li><span><a href="#Model-inference" data-toc-modified-id="Model-inference-1.4.2">Model inference</a></span></li>
</ul>
</li>
<li>
<span><a href="#Conclusion" data-toc-modified-id="Conclusion-1.5">Conclusion</a></span><ul class="toc-item">
<li><span><a href="#Recommendation-engines" data-toc-modified-id="Recommendation-engines-1.5.1">Recommendation engines</a></span></li>
<li><span><a href="#Overall" data-toc-modified-id="Overall-1.5.2">Overall</a></span></li>
</ul>
</li>
</ul>
</li></ul></div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Building-a-housing-recommendation-engine">Building a housing recommendation engine<a class="anchor-link" href="#Building-a-housing-recommendation-engine">¶</a>
</h2>
<p>So far, we have feature engineered our data set with location specific features. We explicitly defined weights for different attributes and arrived at a rank. Instead, we could simply like and dislike a few houses and let a machine learning model infer our preferences based on that. That is what this notebook tries to do.</p>
<p>Since it is time consuming to like and dislike a large number of properties, we pick the top 50 notebooks from our previous rank and like them all. We dislike the remaining ones.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="kn">from</span> <span class="nn">arcgis.gis</span> <span class="k">import</span> <span class="n">GIS</span>
<span class="kn">from</span> <span class="nn">arcgis.features</span> <span class="k">import</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">FeatureLayer</span><span class="p">,</span> <span class="n">FeatureSet</span><span class="p">,</span> <span class="n">GeoAccessor</span><span class="p">,</span> <span class="n">GeoSeriesAccessor</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Read-ranked-dataset">Read ranked dataset<a class="anchor-link" href="#Read-ranked-dataset">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'resources/houses_ranked.csv'</span><span class="p">)</span>
<span class="n">prop_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">from_xy</span><span class="p">(</span><span class="n">prop_df</span><span class="p">,</span> <span class="s1">'LONGITUDE'</span><span class="p">,</span><span class="s1">'LATITUDE'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Generate-preference-column">Generate preference column<a class="anchor-link" href="#Generate-preference-column">¶</a>
</h4>
<p>We will pick the top 50 records and provide a positive preference to them. Then we will drop the score and rank columns and let the machine learning algorithm learn our preferences.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Index(['Unnamed: 0', 'SALE TYPE', 'PROPERTY TYPE', 'ADDRESS', 'CITY', 'STATE',
       'ZIP', 'PRICE', 'BEDS', 'BATHS', 'LOCATION', 'SQUARE FEET', 'LOT SIZE',
       'YEAR BUILT', 'DAYS ON MARKET', 'PRICE PER SQFT', 'HOA PER MONTH',
       'STATUS', 'URL', 'SOURCE', 'MLS', 'LATITUDE', 'LONGITUDE', 'SHAPE',
       'grocery_count', 'restaurant_count', 'hospitals_count', 'coffee_count',
       'bars_count', 'gas_count', 'shops_count', 'travel_count', 'parks_count',
       'edu_count', 'commute_length', 'commute_duration', 'scores_scaled',
       'rank'],
      dtype='object')</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(331, 38)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Generate a prefernce list that is <code>331</code> records long. This list has <code>1</code> for first <code>50</code> records followed by <code>0</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">preference_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span>
<span class="n">preference_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">331</span><span class="o">-</span><span class="mi">50</span><span class="p">))</span>
<span class="nb">len</span><span class="p">(</span><span class="n">preference_list</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>331</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_df</span><span class="p">[</span><span class="s1">'favorite'</span><span class="p">]</span> <span class="o">=</span> <span class="n">preference_list</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Drop-rank,-scores_scaled-columns-from-DataFrame">Drop <code>rank</code>, <code>scores_scaled</code> columns from DataFrame<a class="anchor-link" href="#Drop-rank,-scores_scaled-columns-from-DataFrame">¶</a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Unnamed: 0'</span><span class="p">,</span><span class="s1">'scores_scaled'</span><span class="p">,</span><span class="s1">'rank'</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">prop_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>SALE TYPE</th>
      <th>PROPERTY TYPE</th>
      <th>ADDRESS</th>
      <th>CITY</th>
      <th>STATE</th>
      <th>ZIP</th>
      <th>PRICE</th>
      <th>BEDS</th>
      <th>BATHS</th>
      <th>LOCATION</th>
      <th>...</th>
      <th>coffee_count</th>
      <th>bars_count</th>
      <th>gas_count</th>
      <th>shops_count</th>
      <th>travel_count</th>
      <th>parks_count</th>
      <th>edu_count</th>
      <th>commute_length</th>
      <th>commute_duration</th>
      <th>favorite</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>MLS Listing</td>
      <td>Single Family Residential</td>
      <td>15986 SE Spokane Ct. Ave</td>
      <td>Portland</td>
      <td>OR</td>
      <td>97236.0</td>
      <td>543900.0</td>
      <td>4.0</td>
      <td>3.5</td>
      <td>Portland Southeast</td>
      <td>...</td>
      <td>50</td>
      <td>2</td>
      <td>34</td>
      <td>46</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>5.796321</td>
      <td>16.509734</td>
      <td>1</td>
    </tr>
<tr>
<th>1</th>
      <td>MLS Listing</td>
      <td>Multi-Family (2-4 Unit)</td>
      <td>SE Henderson St</td>
      <td>Portland</td>
      <td>OR</td>
      <td>97206.0</td>
      <td>625000.0</td>
      <td>6.0</td>
      <td>6.0</td>
      <td>LENTS</td>
      <td>...</td>
      <td>50</td>
      <td>1</td>
      <td>50</td>
      <td>40</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>8.380589</td>
      <td>23.087985</td>
      <td>1</td>
    </tr>
<tr>
<th>2</th>
      <td>MLS Listing</td>
      <td>Single Family Residential</td>
      <td>8268 SE Yamhill St</td>
      <td>Portland</td>
      <td>OR</td>
      <td>97216.0</td>
      <td>550000.0</td>
      <td>7.0</td>
      <td>4.0</td>
      <td>Portland Southeast</td>
      <td>...</td>
      <td>50</td>
      <td>1</td>
      <td>50</td>
      <td>43</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>6.330796</td>
      <td>16.910622</td>
      <td>1</td>
    </tr>
<tr>
<th>3</th>
      <td>MLS Listing</td>
      <td>Single Family Residential</td>
      <td>6311 SE Tenino St</td>
      <td>Portland</td>
      <td>OR</td>
      <td>97206.0</td>
      <td>479900.0</td>
      <td>4.0</td>
      <td>2.5</td>
      <td>Portland Southeast</td>
      <td>...</td>
      <td>50</td>
      <td>2</td>
      <td>44</td>
      <td>48</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>7.299694</td>
      <td>20.389635</td>
      <td>1</td>
    </tr>
<tr>
<th>4</th>
      <td>MLS Listing</td>
      <td>Multi-Family (2-4 Unit)</td>
      <td>2028 SE Harold St</td>
      <td>Portland</td>
      <td>OR</td>
      <td>97202.0</td>
      <td>699900.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>SELLWOOD - WEST MORELAND</td>
      <td>...</td>
      <td>50</td>
      <td>2</td>
      <td>40</td>
      <td>45</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>3.710354</td>
      <td>11.486135</td>
      <td>1</td>
    </tr>
</tbody>
</table>
<p>5 rows × 36 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="One-hot-encoding">One hot encoding<a class="anchor-link" href="#One-hot-encoding">¶</a>
</h3>
<p>We drop more columns that don't really determine a buyer's preference</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Index(['SALE TYPE', 'PROPERTY TYPE', 'ADDRESS', 'CITY', 'STATE', 'ZIP',
       'PRICE', 'BEDS', 'BATHS', 'LOCATION', 'SQUARE FEET', 'LOT SIZE',
       'YEAR BUILT', 'DAYS ON MARKET', 'PRICE PER SQFT', 'HOA PER MONTH',
       'STATUS', 'URL', 'SOURCE', 'MLS', 'LATITUDE', 'LONGITUDE', 'SHAPE',
       'grocery_count', 'restaurant_count', 'hospitals_count', 'coffee_count',
       'bars_count', 'gas_count', 'shops_count', 'travel_count', 'parks_count',
       'edu_count', 'commute_length', 'commute_duration', 'favorite'],
      dtype='object')</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_df</span> <span class="o">=</span> <span class="n">prop_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'SALE TYPE'</span><span class="p">,</span><span class="s1">'PROPERTY TYPE'</span><span class="p">,</span><span class="s1">'ADDRESS'</span><span class="p">,</span> <span class="s1">'CITY'</span><span class="p">,</span> <span class="s1">'STATE'</span><span class="p">,</span> <span class="s1">'ZIP'</span><span class="p">,</span><span class="s1">'LOCATION'</span><span class="p">,</span> 
                                <span class="s1">'DAYS ON MARKET'</span><span class="p">,</span><span class="s1">'PRICE PER SQFT'</span><span class="p">,</span><span class="s1">'STATUS'</span><span class="p">,</span>
                                 <span class="s1">'URL'</span><span class="p">,</span> <span class="s1">'SOURCE'</span><span class="p">,</span> <span class="s1">'MLS'</span><span class="p">,</span> <span class="s1">'SHAPE'</span><span class="p">,</span><span class="s1">'LATITUDE'</span><span class="p">,</span> <span class="s1">'LONGITUDE'</span><span class="p">])</span>
<span class="n">train_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>PRICE</th>
      <th>BEDS</th>
      <th>BATHS</th>
      <th>SQUARE FEET</th>
      <th>LOT SIZE</th>
      <th>YEAR BUILT</th>
      <th>HOA PER MONTH</th>
      <th>grocery_count</th>
      <th>restaurant_count</th>
      <th>hospitals_count</th>
      <th>coffee_count</th>
      <th>bars_count</th>
      <th>gas_count</th>
      <th>shops_count</th>
      <th>travel_count</th>
      <th>parks_count</th>
      <th>edu_count</th>
      <th>commute_length</th>
      <th>commute_duration</th>
      <th>favorite</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>543900.0</td>
      <td>4.0</td>
      <td>3.5</td>
      <td>3178.0</td>
      <td>6969.0</td>
      <td>2018.0</td>
      <td>50.0</td>
      <td>20</td>
      <td>50</td>
      <td>6</td>
      <td>50</td>
      <td>2</td>
      <td>34</td>
      <td>46</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>5.796321</td>
      <td>16.509734</td>
      <td>1</td>
    </tr>
<tr>
<th>1</th>
      <td>625000.0</td>
      <td>6.0</td>
      <td>6.0</td>
      <td>2844.0</td>
      <td>6969.0</td>
      <td>2018.0</td>
      <td>0.0</td>
      <td>20</td>
      <td>50</td>
      <td>6</td>
      <td>50</td>
      <td>1</td>
      <td>50</td>
      <td>40</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>8.380589</td>
      <td>23.087985</td>
      <td>1</td>
    </tr>
<tr>
<th>2</th>
      <td>550000.0</td>
      <td>7.0</td>
      <td>4.0</td>
      <td>3038.0</td>
      <td>6969.0</td>
      <td>2018.0</td>
      <td>0.0</td>
      <td>20</td>
      <td>50</td>
      <td>4</td>
      <td>50</td>
      <td>1</td>
      <td>50</td>
      <td>43</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>6.330796</td>
      <td>16.910622</td>
      <td>1</td>
    </tr>
<tr>
<th>3</th>
      <td>479900.0</td>
      <td>4.0</td>
      <td>2.5</td>
      <td>2029.0</td>
      <td>3920.0</td>
      <td>2018.0</td>
      <td>0.0</td>
      <td>20</td>
      <td>50</td>
      <td>6</td>
      <td>50</td>
      <td>2</td>
      <td>44</td>
      <td>48</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>7.299694</td>
      <td>20.389635</td>
      <td>1</td>
    </tr>
<tr>
<th>4</th>
      <td>699900.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>2582.0</td>
      <td>6969.0</td>
      <td>2016.0</td>
      <td>0.0</td>
      <td>20</td>
      <td>50</td>
      <td>8</td>
      <td>50</td>
      <td>2</td>
      <td>40</td>
      <td>45</td>
      <td>50</td>
      <td>50</td>
      <td>50</td>
      <td>3.710354</td>
      <td>11.486135</td>
      <td>1</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Scale-numeric-columns">Scale numeric columns<a class="anchor-link" href="#Scale-numeric-columns">¶</a>
</h3>
<p>We use the same <code>MinMaxScaler</code> we used earlier to scale the data.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="k">import</span> <span class="n">MinMaxScaler</span>
<span class="n">mm_scaler</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">columns_to_scale</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'PRICE'</span><span class="p">,</span> <span class="s1">'BEDS'</span><span class="p">,</span> <span class="s1">'BATHS'</span><span class="p">,</span> <span class="s1">'SQUARE FEET'</span><span class="p">,</span> <span class="s1">'LOT SIZE'</span><span class="p">,</span>
       <span class="s1">'YEAR BUILT'</span><span class="p">,</span> <span class="s1">'HOA PER MONTH'</span><span class="p">,</span><span class="s1">'grocery_count'</span><span class="p">,</span> <span class="s1">'restaurant_count'</span><span class="p">,</span> <span class="s1">'hospitals_count'</span><span class="p">,</span> <span class="s1">'coffee_count'</span><span class="p">,</span>
       <span class="s1">'bars_count'</span><span class="p">,</span> <span class="s1">'gas_count'</span><span class="p">,</span> <span class="s1">'shops_count'</span><span class="p">,</span> <span class="s1">'travel_count'</span><span class="p">,</span> <span class="s1">'parks_count'</span><span class="p">,</span>
       <span class="s1">'edu_count'</span><span class="p">,</span> <span class="s1">'commute_length'</span><span class="p">,</span> <span class="s1">'commute_duration'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scaled_array</span> <span class="o">=</span> <span class="n">mm_scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="n">columns_to_scale</span><span class="p">])</span>
<span class="n">prop_scaled</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scaled_array</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns_to_scale</span><span class="p">)</span>
<span class="n">prop_scaled</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>PRICE</th>
      <th>BEDS</th>
      <th>BATHS</th>
      <th>SQUARE FEET</th>
      <th>LOT SIZE</th>
      <th>YEAR BUILT</th>
      <th>HOA PER MONTH</th>
      <th>grocery_count</th>
      <th>restaurant_count</th>
      <th>hospitals_count</th>
      <th>coffee_count</th>
      <th>bars_count</th>
      <th>gas_count</th>
      <th>shops_count</th>
      <th>travel_count</th>
      <th>parks_count</th>
      <th>edu_count</th>
      <th>commute_length</th>
      <th>commute_duration</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>0.572446</td>
      <td>0.333333</td>
      <td>0.3</td>
      <td>0.448684</td>
      <td>0.100778</td>
      <td>0.947368</td>
      <td>0.25</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.500000</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.68</td>
      <td>0.92</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.002085</td>
      <td>0.004983</td>
    </tr>
<tr>
<th>1</th>
      <td>0.794577</td>
      <td>0.666667</td>
      <td>0.8</td>
      <td>0.321251</td>
      <td>0.100778</td>
      <td>0.947368</td>
      <td>0.00</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.500000</td>
      <td>1.0</td>
      <td>0.5</td>
      <td>1.00</td>
      <td>0.80</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.003189</td>
      <td>0.008123</td>
    </tr>
<tr>
<th>2</th>
      <td>0.589154</td>
      <td>0.833333</td>
      <td>0.4</td>
      <td>0.395269</td>
      <td>0.100778</td>
      <td>0.947368</td>
      <td>0.00</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.333333</td>
      <td>1.0</td>
      <td>0.5</td>
      <td>1.00</td>
      <td>0.86</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.002313</td>
      <td>0.005175</td>
    </tr>
<tr>
<th>3</th>
      <td>0.397151</td>
      <td>0.333333</td>
      <td>0.1</td>
      <td>0.010301</td>
      <td>0.046518</td>
      <td>0.947368</td>
      <td>0.00</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.500000</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.88</td>
      <td>0.96</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.002727</td>
      <td>0.006835</td>
    </tr>
<tr>
<th>4</th>
      <td>0.999726</td>
      <td>0.500000</td>
      <td>0.4</td>
      <td>0.221290</td>
      <td>0.100778</td>
      <td>0.842105</td>
      <td>0.00</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.666667</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.80</td>
      <td>0.90</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.001193</td>
      <td>0.002586</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Split-dataset-into-training-and-test">Split dataset into training and test<a class="anchor-link" href="#Split-dataset-into-training-and-test">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_scaled</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[29]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Index(['PRICE', 'BEDS', 'BATHS', 'SQUARE FEET', 'LOT SIZE', 'YEAR BUILT',
       'HOA PER MONTH', 'grocery_count', 'restaurant_count', 'hospitals_count',
       'coffee_count', 'bars_count', 'gas_count', 'shops_count',
       'travel_count', 'parks_count', 'edu_count', 'commute_length',
       'commute_duration'],
      dtype='object')</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prop_scaled</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 331 entries, 0 to 330
Data columns (total 19 columns):
PRICE               331 non-null float64
BEDS                331 non-null float64
BATHS               331 non-null float64
SQUARE FEET         331 non-null float64
LOT SIZE            331 non-null float64
YEAR BUILT          331 non-null float64
HOA PER MONTH       331 non-null float64
grocery_count       331 non-null float64
restaurant_count    331 non-null float64
hospitals_count     331 non-null float64
coffee_count        331 non-null float64
bars_count          331 non-null float64
gas_count           331 non-null float64
shops_count         331 non-null float64
travel_count        331 non-null float64
parks_count         331 non-null float64
edu_count           331 non-null float64
commute_length      331 non-null float64
commute_duration    331 non-null float64
dtypes: float64(19)
memory usage: 49.2 KB
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">prop_scaled</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s1">'favorite'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">train_test_split</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">test_size</span><span class="o">=</span><span class="mf">0.33</span><span class="p">)</span>

<span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(221, 110)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Logistic-Regression">Logistic Regression<a class="anchor-link" href="#Logistic-Regression">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="k">import</span> <span class="n">LogisticRegression</span>
<span class="n">log_model</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">log_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[LibLinear]</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[34]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>LogisticRegression(C=1.0, class_weight=None, dual=False, fit_intercept=True,
          intercept_scaling=1, max_iter=100, multi_class='ovr', n_jobs=1,
          penalty='l2', random_state=None, solver='liblinear', tol=0.0001,
          verbose=1, warm_start=False)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_predictions</span> <span class="o">=</span> <span class="n">log_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_predictions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[36]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0,
       0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Model-evaluation">Model evaluation<a class="anchor-link" href="#Model-evaluation">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">classification_report</span><span class="p">,</span> <span class="n">confusion_matrix</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">test_predictions</span><span class="p">,</span> <span class="n">target_names</span><span class="o">=</span><span class="p">[</span><span class="s1">'not fav'</span><span class="p">,</span><span class="s1">'fav'</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>('             precision    recall  f1-score   support\n'
 '\n'
 '    not fav       0.94      0.98      0.96        89\n'
 '        fav       0.88      0.71      0.79        21\n'
 '\n'
 'avg / total       0.93      0.93      0.92       110\n')
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">test_predictions</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(87, 2, 6, 15)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Model-inference">Model inference<a class="anchor-link" href="#Model-inference">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">coeff</span> <span class="o">=</span> <span class="n">log_model</span><span class="o">.</span><span class="n">coef_</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[('PRICE', -0.4817),
 ('BEDS', 0.56799),
 ('BATHS', 0.65258),
 ('SQUARE FEET', 0.09618),
 ('LOT SIZE', -0.10108),
 ('YEAR BUILT', 0.86107),
 ('HOA PER MONTH', 0.02129),
 ('grocery_count', -0.7736),
 ('restaurant_count', -1.22493),
 ('hospitals_count', 1.38967),
 ('coffee_count', 1.27494),
 ('bars_count', 2.9728),
 ('gas_count', 1.16501),
 ('shops_count', -0.71489),
 ('travel_count', 0.24195),
 ('parks_count', -1.02031),
 ('edu_count', -0.45057),
 ('commute_length', -0.58029),
 ('commute_duration', -0.59949)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">log_model</span><span class="o">.</span><span class="n">intercept_</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([-1.46905595])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Conclusion">Conclusion<a class="anchor-link" href="#Conclusion">¶</a>
</h3>
<h4 id="Recommendation-engines">Recommendation engines<a class="anchor-link" href="#Recommendation-engines">¶</a>
</h4>
<p>From the example above, we could build a recommendation engine that runs on periodically on a newer set of properties and determines which ones are worth your time (one's it predicts you would 'like'). The ML model's weights appear similar to what we defined manually. In some cases, it goes way off.</p>
<p>This type of recommendation is called 'content based filtering' and for this to work, we need a really large training set. In reality nobody can sit and generate such a large set. In practice, another type of recommendations called 'community based filtering' is used. Based on the features identified for the properties, it tries to find similarity between buyers and pools the training set for all similar buyers together to create a really large training set and learns from that.</p>
<h4 id="Overall">Overall<a class="anchor-link" href="#Overall">¶</a>
</h4>
<p>In these sets of notebooks, we observed how data science and machine learning approaches can be employed in the real estate industry. Buying houses is a very personal process, however a lot of decisions are heavily influenced by the location of the houses. We showed how Python libraries such as Pandas can be used to statistically analyze the properties. We also showed how the ArcGIS API for Python adds spatial capabilities to Pandas allowing to perform spatial data analysis. We enriched the data with information on access to different facilities and used that to compare, score and rank the properties. The shortlist we arrived at can be used for field visits.</p>
<p>We conclude with a forward thinking approach to turn this into a recommendation engine and suggest scope for future work in this area.</p>

</div>
</div>
</div>
</div>
    </div>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-SDRP1VVYu+tgAGKhddBSl5+ezofHKZeI+OzxakbIe/Y=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2019         <a href="mailto:atma.mani@outlook.com">Atma Mani</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../../../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
